<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-08-08 Mon 23:36 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Coq/SSReflect/MathCompの設定</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Reynald Affeldt" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../index.css">
<style>.vspace {  margin-bottom: 20cm;  }</style>
<style type="text/css"> body {width: 70em; font-family: Arial, Helvetica; margin-left: 5em; font-size: large;} </style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Coq/SSReflect/MathCompの設定</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6be0531">1. 設定成功報告</a></li>
<li><a href="#orgdde21ce">2. Coq/SSReflect/MathCompの設定</a>
<ul>
<li><a href="#org6508527">2.1. Unix系のオペレーティングシステムの場合</a>
<ul>
<li><a href="#org440aae6">2.1.1. パッケージからの設定</a></li>
<li><a href="#org154cbca">2.1.2. [ADVANCED] ソースコードからのコンパイル</a></li>
</ul>
</li>
<li><a href="#orgbc689d6">2.2. Windows 10 &amp; 11の場合</a>
<ul>
<li><a href="#org970f80c">2.2.1. 事前準備</a></li>
<li><a href="#org35ada1b">2.2.2. 方法1 (WSL 2 + opam)</a></li>
<li><a href="#org509e280">2.2.3. 方法2 (cygwin + バイナリ)</a></li>
<li><a href="#org4a2e4c2">2.2.4. [ADVANCED] 方法3 (cygwin + opam)</a></li>
</ul>
</li>
<li><a href="#orgf2c81cc">2.3. MacOSの場合</a></li>
</ul>
</li>
<li><a href="#orge27e91f">3. IDEの設定</a>
<ul>
<li><a href="#org74b1e27">3.1. IDEの基本的な使い方</a></li>
<li><a href="#org399a7f9">3.2. Proof Generalの設定</a>
<ul>
<li><a href="#orgd2aa86d">3.2.1. 特別な設定の読み込み</a></li>
</ul>
</li>
<li><a href="#org2caa3b4">3.3. CoqIDEの設定</a></li>
<li><a href="#org070d084">3.4. vscodeの設定</a></li>
</ul>
</li>
<li><a href="#org05fd937">4. 追加情報</a></li>
</ul>
</div>
</div>

<p style="text-align:center">
<span style="color:red">
&#8594; <a href="https://github.com/affeldt-aist/mathcomp-install">github版</a> &#8592;
</span>
</p>

<div id="outline-container-org6be0531" class="outline-2">
<h2 id="org6be0531"><span class="section-number-2">1</span> 設定成功報告</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">[2022-08-03 Wed]</span></span>: Windows 11, Coq 8.15, MathComp 1.15 (WSL 2)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2022-03-01 Tue]</span></span>: Windows 11 21H2, Coq 8.15, MathComp 1.14 (WSL 2)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2021-04-12 Mon]</span></span>: Windows 10 Home, Coq 8.13.2, MathComp 1.12 (WSL 2)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2020-11-20 Fri]</span></span>: Debian 10.6, Coq 8.12.1 (opam), MathComp 1.11.0 (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2020-11-09 Mon]</span></span>: Ubuntu 20.04.1 LTS, Coq github master, MathComp github master</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2020-08-18 Tue]</span></span>: Ubuntu 20.04.1 LTS, Coq 8.12.0 (opam), MathComp 1.11.0 (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2019-09-24 Tue]</span></span>: Windows 10, Coq 8.10beta3 (WSL)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2019-07-12 Fri]</span></span>: Windows 10, Coq 8.9.1 (opam), MathComp 1.9.0 (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2019-07-08 Mon]</span></span>: Windows 10, Coq 8.9.1 (binary), MathComp 1.9.0 (source)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2019-05-30 Thu]</span></span>: Debian 9.7, OCaml 4.06.1, Coq 8.9.1, MathComp 1.9.0 (source)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2019-04-16 Tue]</span></span>: Debian 9.8, OCaml 4.07.1, Coq 8.9.0 (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2019-04-09 Tue]</span></span>: Debian 9.7, OCaml 4.06.1, Coq 8.9.0, MathComp-1.8.0 (source)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2018-10-02 Tue]</span></span>: Debian 9.5, OCaml 4.06.1, Coq 8.8.2 (source), MathComp (github);
Windows 10, OCaml 4.04.0 (opam), Coq 8.8.2 (source), MathComp (gitjhub)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2018-08-07 Tue]</span></span>: Debian 9.5, OCaml 4.06.0, Coq 8.8.1 (source), MathComp(github);
Windows 10, OCaml 4.04.0 (opam), Coq 8.8.1 (source), MathComp (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2018-04-25 Wed]</span></span>: Debian 9.4, OCaml 4.04.2, Coq 8.8.0 (source), MathComp (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2018-03-08 Thu]</span></span>: Windows 10, OCaml 4.04.0 (opam), Coq 8.7.2 (source), MathComp (github);
Debian 9.3, OCaml 4.04.2, Coq 8.7.2 (source), MathComp (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2018-01-16 Tue]</span></span>: Windows 10, OCaml 4.04.0 (opam), Coq 8.7.1 (source), MathComp (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2017-11-28 Tue]</span></span>: Windows 10, OCaml (opam), Coq 8.7.0 (source), MathComp (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2017-10-24 Tue]</span></span>: Debian 9.1, Coq 8.7.0 (source), MathComp (github);
Debian, Coq 8.7.0 (opam), MathComp 1.6.2 (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2017-09-29 Fri]</span></span>: Debian 9.1, Coq 8.7-beta1 (source), MathComp (github);
Debian, Coq 8.6.1 (opam), MathComp 1.6.1 (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2017-07-26 Wed]</span></span>: Debian 9.1, Coq 8.6.1 (source), MathComp (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2017-01-12 Thu]</span></span>: Windows 8.1, Coq (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2017-01-06 Fri]</span></span>: Debian 8.6, (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2016-12-21 Wed]</span></span>: Debian 8.6 / Ubuntu 16.04.1 LTS, OCaml 4.04.0 (opam), 
Coq 8.6 (source/github), MathComp 1.6.1 (source/github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2016-02-01 Mon]</span></span>: Windows 8.1, Coq 8.5, MathComp 1.6 (binary);
Ubuntu Server 14.04.1 LTS, (source)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-10-30 Fri]</span></span>: (github)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-09-07 Mon]</span></span>: Debian 8.0, (opam)</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-06-08 Mon]</span></span>: Windows 8.1 cygwin64, coq-installer-8.5beta2.exe, ssreflectmathcomp-1.5.coq85beta2.exe</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2015-04-04 Sat]</span></span>: Windows 8.1 cygwin64, ssreflectmathcomp-1.5.coq85beta1</li>
<li><span class="timestamp-wrapper"><span class="timestamp">[2014-11-19 Wed]</span></span>: Ubuntu Server 14.04.1 LTS, OCaml 4.01.0, camlp5 6.11, Coq 8.4pl5, SSReflect 1.5, MathComp 1.5</li>
</ul>
</div>
</div>
<div id="outline-container-orgdde21ce" class="outline-2">
<h2 id="orgdde21ce"><span class="section-number-2">2</span> Coq/SSReflect/MathCompの設定</h2>
<div class="outline-text-2" id="text-2">
<p>
設定はUnix系のオペレーティングシステムでスムーズです. ただし, Linuxの
パッケージマネージャー(Debianのapt等)のバージョンはいつも遅れています
ので, 勧められません. 使える設定方法は２つあります.  opamによる設定は
簡単ですが, opamの理解が少し要ります. 最新のパッケージが出来上がるまで
に時間はあまりかかりません. トラブルはあまりありません. ソースコードか
らコンパイルすることもスムーズです. 最新版を設定する方法として勧めます
(リーリスされいないライブラリ(githubのmasterなど)を使いたいとき).
</p>

<p>
Windowsの場合, バイナリが用意されています. ソースコードからコンパイルすることは手間がかかります.
</p>
</div>
<div id="outline-container-org6508527" class="outline-3">
<h3 id="org6508527"><span class="section-number-3">2.1</span> Unix系のオペレーティングシステムの場合</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org440aae6" class="outline-4">
<h4 id="org440aae6"><span class="section-number-4">2.1.1</span> パッケージからの設定</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
OCamlの専用パッケージマネージャー<a href="https://opam.ocaml.org/"> opam</a> でCoqのパッケージを設定ができます. Debianのaptほど遅れていません.
SSReflectとMathCompを含むCoqライブラリが用意されています(<a href="https://coq.inria.fr/opam/www/">Coq OPAM packages</a>).
現時点<span class="timestamp-wrapper"><span class="timestamp">[2020-11-09 Mon]</span></span>, <code>opam show coq-mathcomp-ssreflect</code> によると,
1.11.0版のパッケージがあります.
</p>

<ul class="org-ul">
<li>最初に, <a href="https://opam.ocaml.org/doc/Install.html">opamを設定</a>します:  
<ul class="org-ul">
<li>opamをダウンロードします
<ul class="org-ul">
<li>オペレーティングシステムのパッケージマネージャーを使います(例えば, <code>sudo apt get install opam</code>).
<span class="timestamp-wrapper"><span class="timestamp">[2021-04-12 Mon] </span></span> 時点、Debian系のOS上のバージョンは2.0.3以上ですので, 大丈夫でしょう.</li>
<li>あるいは, <code>sh &lt;(curl -sL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)</code>
<ul class="org-ul">
<li>superuserの権利が要るかもしれません</li>
<li><code>/usr/local/bin</code> にインストールされます</li>
</ul></li>
</ul></li>
<li><code>opam init</code>
<ul class="org-ul">
<li><code>make</code>, <code>m4</code>, <code>gcc</code>, <code>bubblewrap</code> が要ります</li>
<li><code>/.profile</code> が更新されます
<ul class="org-ul">
<li>次のログイン, 反映されます(<code>.bashrc</code> から同じ更新しなくてもいいでしょう)</li>
</ul></li>
<li>コンパイラを指定できます; 例えば, <code>opam init --comp=4.11.2</code></li>
<li><code>eval $(opam env)</code> で設定が完了します</li>
</ul></li>
<li>opamは既に設定された場合, 最新のパッケージの情報を取得: <code>opam update</code></li>
<li>使えるパッケージのリスト: <code>opam list -a</code></li>
</ul></li>
<li>次に, OCamlの環境を設定します:
<ul class="org-ul">
<li><code>opam switch 4.11.2</code>
<ul class="org-ul">
<li>初めての設定なら, <code>opam switch create 4.11.2</code> (<span class="timestamp-wrapper"><span class="timestamp">[2022-02-19 Sat] </span></span> または, <code>opam switch create ocaml-base-compiler.4.11.2</code> ?)
<ul class="org-ul">
<li><code>opam switch list-available</code> で可能な選択肢が分かります</li>
<li><code>opam switch list</code> ですでに用意されているOCamlのコンパイラを選べます</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>
　　　 - <span class="timestamp-wrapper"><span class="timestamp">[2021-04-12 Mon] </span></span> 時点, 4.13.0は最新です
</p>
<ul class="org-ul">
<li><code>eval `opam config env`</code> また <code>eval $(opam env)</code>
<ul class="org-ul">
<li><code>opam switch</code> を行った後, 必要です</li>
</ul></li>
<li>次にCoqに必要なOCamlのプログラムを設定します(個人の環境の整備によって, 他のプログラムを設定する必要があるかもしれませんが, opamが教えます):
<ul class="org-ul">
<li><code>opam update</code> で最新バージョンの情報を取得します</li>
<li><code>opam install ocamlfind</code> (<span class="timestamp-wrapper"><span class="timestamp">[2021-04-12 Mon]</span></span>時点, 1.9.1は最新です)</li>
<li><code>opam install num</code> (<span class="timestamp-wrapper"><span class="timestamp">[2021-04-12 Mon]</span></span>時点, 1.4は最新です; Ocaml 4.06.0から必要です)</li>
</ul></li>
</ul>
<ul class="org-ul">
<li>次に, Coqを設定します:
<ul class="org-ul">
<li>Coqのリポジトリを追加: <code>opam repo add coq-released https://coq.inria.fr/opam/released</code>
<ul class="org-ul">
<li><code>opam repo add coq-released --set-default</code> を行うと、これから新しい <code>switch</code> を作ると、Coqのリポジトリを自動的に追加されます</li>
<li><a href="https://github.com/coq/opam-coq-archive/tree/master/released/packages">Coqのopamパッケージ</a> (prefixは <code>coq-</code> です)</li>
<li><code>opam repo</code> でリポジトリをリストアップできます</li>
</ul></li>
<li><code>opam install coq.8.13.2</code> (<span class="timestamp-wrapper"><span class="timestamp">[2021-04-12 Mon]</span></span>時点, 最新版)
<ul class="org-ul">
<li><code>conf-findutils</code>, <code>conf-gmp</code>, <code>zarith</code> に依存します
<ul class="org-ul">
<li>Debian/Ubuntuで 新しいライブラリの設定が要るかもしれません: <code>libgmp-dev</code></li>
</ul></li>
</ul></li>
</ul></li>
<li>最後に, MathCompを設定します:
<ul class="org-ul">
<li><code>opam install coq-mathcomp-ssreflect.1.12.0</code></li>
<li>その他のMathCompのパッケージ(prefixは <code>coq-mathcomp</code> です):
<ul class="org-ul">
<li><code>coq-mathcomp-fingroup</code></li>
<li><code>coq-mathcomp-algebra</code></li>
<li><code>coq-mathcomp-solvable</code></li>
<li><code>coq-mathcomp-field</code></li>
<li><code>coq-mathcomp-character</code></li>
<li><code>coq-mathcomp-finmap</code></li>
<li><code>coq-mathcomp-bigenough</code></li>
<li><code>coq-mathcomp-sum-of-two-square</code>, <code>coq-mathcomp-multinomials</code> (user contrib)</li>
<li><code>coq-mathcomp-odd-order</code> (先端な応用ですので, 要らないかもしれません)</li>
</ul></li>
</ul></li>
<li>今度の更新は, <code>opam update</code> , <code>opam upgrade coq.8.13.2</code> (例えば) で済みます.
要らなくなったパッケージは <code>opam remove coq-mathcomp-odd-order</code> (例えば)で消せます.
問題が生じる場合, <code>opam reinstall coq</code> もできます.</li>
</ul>
</div>
</div>
<div id="outline-container-org154cbca" class="outline-4">
<h4 id="org154cbca"><span class="section-number-4">2.1.2</span> [ADVANCED] ソースコードからのコンパイル</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
コンパイルのために必要なソフトウェアは通常のシステムで既にあるオープンソースソフトウェアです.
Unix系なら, パッケージマネージャーから得られます. 必要なソフトウェアの情報のまとめ:
</p>
<ul class="org-ul">
<li>GNU make (バージョン &gt;= 3.81)</li>
<li>C compiler</li>
<li>TeX/LaTeX (ドキュメントのため)</li>
<li><a href="https://ocaml.org/">OCaml</a> (バージョン &gt;= 4.05.0; <code>ocaml -version</code>) (<span class="timestamp-wrapper"><span class="timestamp">[2020-11-09 Mon]</span></span>時点の最新版: 4.12.0) (<a href="https://ocaml.org/docs/install.html">インストール</a>)</li>
<li><a href="https://github.com/ocaml/Zarith">ZArith</a> (<span class="timestamp-wrapper"><span class="timestamp">[2020-11-09 Mon]</span></span>時点、最新版: 1.10)
<ul class="org-ul">
<li>インストール: <code>opam install zarith</code>
<ul class="org-ul">
<li>パッケージマネージャーから: <code>libgmp-dev</code></li>
</ul></li>
</ul></li>
<li>CoqIDEのため: <a href="https://github.com/garrigue/lablgtk">lablgtk3-sourceview3</a>, gtk+3, gtksourceview3
<ul class="org-ul">
<li>インストール: <code>opam install lablgtk3-sourceview3</code>
<ul class="org-ul">
<li>パッケージマネージャーから: <code>libcairo2-dev</code>, <code>libexpat1-dev</code>, <code>libgtk-3-dev</code>, <code>libgtksourceview-3.0-dev</code></li>
</ul></li>
</ul></li>
<li><a href="https://camlp5.github.io/">Camlp5</a> (バージョン &gt;= 6.14?;  <code>camlp5 -v</code>, 最新版<span class="timestamp-wrapper"><span class="timestamp">[2020-11-09 Mon]</span></span>: 8.00, transitionalモード?)
<ul class="org-ul">
<li>不要になりましたか?</li>
</ul></li>
</ul>
</div>

<ol class="org-ol">
<li><a id="org1df3466"></a>ソースコードのアーカイブからコンパイル<br />
<div class="outline-text-5" id="text-2-1-2-1">
<p>
Coq(SSReflectの一部を含みます)のコンパイル成功報告：
</p>
<ul class="org-ul">
<li><code>ocamlc</code> などを使える状態かを確認します(Unixで <code>$PATH</code> に入っていますか? 例えば, <code>ocamlc -v</code> を試します)</li>
<li>Coqをダウンロードします
<ul class="org-ul">
<li>gitで: <code>git clone https://github.com/coq/coq.git</code>
<ul class="org-ul">
<li><code>git ls-remote --heads</code></li>
<li>trunkブランチからv8.12ブランチに移動: <code>git checkout v8.12</code></li>
</ul></li>
<li>または, アーカイブを <a href="https://github.com/coq/coq/releases/">ダウンロード</a> します</li>
</ul></li>
<li>できたディレクトリを <code>COQCOMPILEDIRECTORY</code> と呼びます</li>
<li>Coqをソースコードからコンパイルします
<ul class="org-ul">
<li><code>cd coq</code> あるいは <code>cd coq-8.12.0</code></li>
<li><code>./configure</code>
<ul class="org-ul">
<li>バイナリのインストールは不要なら, <code>-local</code> を使います</li>
<li>バイナリの位置に関して, デフォルト選択で結構です
(バイナリは <code>/usr/local/bin</code>, ライブラリは <code>/usr/local/lib/coq</code> 等, superuserになる必要があります)</li>
<li>バイナリのインストールの場所を指定するために, <code>-prefix</code> を使います</li>
</ul></li>
<li><code>make</code> (ちょっと時間がかかりますので, <code>-jX</code> で並列コンパイルできます)
<ul class="org-ul">
<li><code>make byte</code> でバイトコード版もできます(デバグに使います)</li>
</ul></li>
<li><code>sudo make install</code>
<ul class="org-ul">
<li><code>-local</code> なら不要 (superuserにならなくいいです)</li>
<li>superuserにならないと, デフォルト選択(<code>/usr/local/bin</code> 等)でのインストールが失敗します</li>
<li>SSReflectのプラッグインとセオリー(の一部)は
<code>COQINSTALLDIRECTORY/plugins/{ssr,ssrmatching,ssrsearch}/</code> と
<code>COQINSTALLDIRECTORY/theories/ssr</code> に置かれます</li>
</ul></li>
<li><code>-local</code> の場合以外, <code>make clean</code> できます</li>
<li><code>cd ..</code></li>
</ul></li>
<li>coqtop等は使えるようになった状態であるかどうかを確認します
<ul class="org-ul">
<li><code>export COQBIN=COQINSTALLDIRECTORY/bin/</code> という変数を作っておいていいです
(<code>.bashrc</code> ファイルなら, <code>source .bashrc</code> を行います)</li>
<li>特に, Unixで <code>$PATH</code> に追加します(例えば, <code>export PATH=$COQBIN:$PATH</code>)</li>
</ul></li>
<li>テスト:</li>
</ul>
<pre class="example">
$ coqtop
Welcome to machine:directory,master (commit)

Coq &lt; 
</pre>

<p>
MathComp 1.11.0<span class="timestamp-wrapper"><span class="timestamp">[2020-11-09 Mon]</span></span>のコンパイル成功報告：
</p>
<ul class="org-ul">
<li>既存のMathCompを削除したほうが無難です
<ul class="org-ul">
<li><code>COQINSTALLDIRECTORY/user-contrib</code> の <code>mathcomp</code> ディレクトリを削除か名前変更します</li>
</ul></li>
<li>MathCompのsourcesのソースをダウンロードします
<ul class="org-ul">
<li><code>git clone https://github.com/math-comp/math-comp.git</code>
<ul class="org-ul">
<li>すでに <code>clone</code> されているなら, <code>git pull --rebase</code></li>
</ul></li>
<li>または, アーカイブを <a href="https://github.com/math-comp/math-comp/releases">ダウンロード</a> します</li>
</ul></li>
<li>MathCompをコンパイルします:
<ul class="org-ul">
<li><code>cd math-comp/mathcomp</code></li>
<li><code>export COQBIN=/COQINSTALLDIRECTORY/bin/</code> (coqtop等のバイナリがあるディレクトリ)</li>
<li><code>export PATH=$COQBIN:$PATH</code></li>
<li><code>make</code> (ちょっと時間がかかりますので, <code>-j</code> オプションで並列コンパイルできます)
<ul class="org-ul">
<li><code>-j</code> オプションで約10分かかります</li>
<li>更新なら, その前, <code>make clean</code> が要るかもしれません</li>
</ul></li>
<li><code>sudo make install</code>
<ul class="org-ul">
<li>その結果で, ライブラリは <code>COQINSTALLDIRECTORY/user-contrib/mathcomp</code> に置かれます</li>
<li>しないと、明確に示す必要があります</li>
<li>localインストールなら, superuserならなくていいです</li>
</ul></li>
<li><code>cd ../..</code></li>
</ul></li>
<li>coqtop等は使えるようになった状態であるかどうかを確認します. 例えば:</li>
</ul>
<pre class="example">
$ coqtop
Welcome to machine:directory,master (commit)

Coq &lt; From mathcomp Require Import eqtype.
[Loading ML file ssrmatching_plugin.cmxs ... done]
[Loading ML file ssreflect_plugin.cmxs ... done]

Coq &lt; 
</pre>

<p>
さらに, MathComp上のライブラリをソースからコンパイルする場合,
今後そのライブラリの <code>_CoqProject</code> を更新します.
例えば, <code>-R ../math-comp/mathcomp mathcomp</code> の追加によって,
ソースからコンパイルしたMathCompを指せます.
</p>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orgbc689d6" class="outline-3">
<h3 id="orgbc689d6"><span class="section-number-3">2.2</span> Windows 10 &amp; 11の場合</h3>
<div class="outline-text-3" id="text-2-2">
<p>
注意: WindowsでのCoqの設定は長い歴史の問題がありますので, 複数の方法を説明しますが,
設定のために時間があるなら「方法1: WSL 2 + opam」を勧めます.
時間ない場合,「方法2: cygwin + バイナリ」を勧めます.
</p>

<p>
Windowsで3つの設定方法を説明します:
</p>
<ul class="org-ul">
<li>方法1: WSL 2 + opam (WSL 2でopamを用いてCoqをコンパイルします)</li>
<li>方法2: cygwin + バイナリ (cygwin上Coqのバイナリを使います)</li>
<li>方法3: cygwin + opam (customなopamを用いてCoqをコンパイルします)</li>
</ul>
</div>

<div id="outline-container-org970f80c" class="outline-4">
<h4 id="org970f80c"><span class="section-number-4">2.2.1</span> 事前準備</h4>
<div class="outline-text-4" id="text-2-2-1">
</div>
<ol class="org-ol">
<li><a id="org150c0b8"></a><a href="https://docs.microsoft.com/ja-jp/windows/wsl/install-win10">方法1: WSL 2</a> の設定<br />
<div class="outline-text-5" id="text-2-2-1-1">
<p>
NB: <span class="timestamp-wrapper"><span class="timestamp">[2022-02-19 Sat]  </span></span>  Windows 10 version 2004から(Windows 11を含めて), ~wsl &#x2013;install~で,
virtualizationを設定し、最新のkernelのLinux distributionを設定します.
</p>

<ul class="org-ul">
<li>Windowsのバージョンを確認します: <code>Windows Key + R</code> を入力し, <code>winver</code> を実行します (<a href="https://support.microsoft.com/ja-jp/help/13443/windows-which-version-am-i-running">ref</a>).
<ul class="org-ul">
<li>必要であれば1903以降のバージョンにアップデートします</li>
</ul></li>
<li>WSL 2本体と好きなLinuxディストリビューションをインストールします (<a href="https://docs.microsoft.com/ja-jp/windows/wsl/install-win10">ref</a>):
<ol class="org-ol">
<li>管理者としてWindows PowerShellを起動し, 次のコマンドを実行します:
<code>wsl --install</code></li>
<li>再起動すると、Ubuntuが起動する</li>
</ol></li>
</ul>

<ul class="org-ul">
<li>スタートメニューまたはWindowsの検索窓からLinuxを起動します
<ol class="org-ol">
<li>ユーザー名とパスワードを入力します</li>
<li>パッケージマネージャーを使って, 基本的なソフトウェアをインストールします:
<ul class="org-ul">
<li>Ubuntu 18.04の場合には <code>sudo add-apt-repository ppa:avsm/ppa</code> を実行します.</li>
<li><code>sudo apt update</code></li>
<li>~sudo apt-get install</li>
</ul></li>
</ol></li>
<li>*emacs*の場合：
<ul class="org-ul">
<li>WSL 2上でX上のemacsなどを使うように, Xorgサーバーを設定します:
<ol class="org-ol">
<li><a href="https://sourceforge.net/projects/vcxsrv/">VcXsrv</a>をダウンロードして, インストールします</li>
<li><code>XLaunch</code> アイコンでVcXsrvを起動します</li>
<li><code>multiple windows</code> ・ <code>start no client</code> ・ <code>Disable access control</code> を選び, configurationを保存します</li>
<li>Windows 10の設定を調整します
<ul class="org-ul">
<li>設定の「ファイアウォールとネットワーク保護」を開きます</li>
<li>「パブリックネットワーク」の下にある「詳細設定」にクリックします</li>
<li>「受信の規則」の「VcXsrv windows xserver」を開きます</li>
<li>「全般」の「操作」を「接続を許可する」にします</li>
<li>「スクープ」に「192.168.0.0/16」,「172.17.0.0/16」,「172.18.0.0/16」,「172.19.0.0/16」,&#x2026;, 「172.26.0.0/16」,「172.27.0.0/16」,「172.28.0.0/16」,「172.27.0.0/16」などを追加します。
実際に、どのアドレスが本当に必要なのか、WSLを起動して <code>echo $DISPLAY</code> で分かります。ただし、よく変わりますので、いくつかを先に登録しておいていいでしょう。</li>
</ul></li>
</ol></li>
<li>WSLのshellで <code>DISPLAY</code> という環境変数の設定も必要です
<ul class="org-ul">
<li><code>./bashrc</code> に <code>export DISPLAY=$(awk '/nameserver / {print $2; exit}' /etc/resolv.conf 2&gt;/dev/null):0</code> を加えます</li>
</ul></li>
</ul></li>
<li>*VSCode*の場合
<ol class="org-ol">
<li>VSCode(Windows版)をインストールする</li>
<li>拡張機能で <code>wsl</code> と検索して、Remote - WSL をインストールする</li>
<li>Ubuntuを再起動する</li>
<li><code>code .</code> を実行すると、VSCodeが開き連動していることが確認できる</li>
<li>確認できたら、以降の設定は必要なく、2.1.1 「パッケージからの設定」と同じ手順で進める</li>
</ol></li>
</ul>
</div>
</li>
<li><a id="org129149a"></a><a href="https://www.cygwin.com/">方法2・方法3: cygwin</a>の設定<br />
<div class="outline-text-5" id="text-2-2-1-2">
<ul class="org-ul">
<li>cygwinをインストールするよう, <a href="https://www.cygwin.com/">https://www.cygwin.com/</a>から, <code>setup-x86_64.exe</code>
(最新版: 2.897 <span class="timestamp-wrapper"><span class="timestamp">[2019-07-08 Mon]</span></span>)をダウンロードして, 実行します.
<ul class="org-ul">
<li>最低限として, <code>make</code>, <code>unzip</code>, <code>git</code>, <code>patch</code>, <code>diffutils</code>,
<code>emacs</code>, <code>emacs-X11</code>, <code>vim</code>, <code>xinit</code>, <code>texlive</code> のパケージを選びま
す.</li>
<li>設定は数分かかります.</li>
</ul></li>
<li>デスクトップの"Cygwin64 Terminal"アイコンをdouble-clickします.</li>
<li>Terminalにて, <code>startxwin</code> を実行して, X11を起動します.
<ul class="org-ul">
<li>そうすると, System Trayアイコンの中に, Cygwin-X11アイコンができるます.
<ul class="org-ul">
<li>みどろの「X」が入っている黒い「C」</li>
</ul></li>
<li>右クリックで「システムツール」のメニューからXTermの起動ができます.
<ul class="org-ul">
<li>そうすると, XTermからemacsの実行ができます</li>
</ul></li>
</ul></li>
<li>cygwinの設定に関して:
<ul class="org-ul">
<li><code>.bashrc</code> に <code>export LANG=C</code> が望ましいです.</li>
<li>日本のキーボードを認識できるように, <code>setxkbmap -model jp106 -layout jp</code> を使えます.</li>
<li>CAPS LOCKをCTRLにするように, 次の内容を含む <code>Xmodmap</code> ファイルを用意してから,
<code>.bashrc</code> に <code>xmodmap /home/username/Xmodmap</code> を加えます:</li>
</ul></li>
</ul>
<pre class="example">
keycode 66 = Control_L
clear Lock
add Control = Control_L
</pre>
<ul class="org-ul">
<li>cygwinに関するその他の情報(例えば, cygwinのアンインストール): <a href="https://cygwin.com/faq">cygwin faq</a></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org35ada1b" class="outline-4">
<h4 id="org35ada1b"><span class="section-number-4">2.2.2</span> 方法1 (WSL 2 + opam)</h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>WSL 2の設定が済んでいるなら, 上記の
2.1.1 「パッケージからの設定」と同じ手順になります.</li>
</ul>
</div>
</div>
<div id="outline-container-org509e280" class="outline-4">
<h4 id="org509e280"><span class="section-number-4">2.2.3</span> 方法2 (cygwin + バイナリ)</h4>
<div class="outline-text-4" id="text-2-2-3">
<ul class="org-ul">
<li><a href="https://github.com/coq/platform/releases">Coq Platformのreleaseページ</a> から, バイナリーをダウンロードと実行します.</li>
</ul>
</div>
</div>
<div id="outline-container-org4a2e4c2" class="outline-4">
<h4 id="org4a2e4c2"><span class="section-number-4">2.2.4</span> [ADVANCED] 方法3 (cygwin + opam)</h4>
<div class="outline-text-4" id="text-2-2-4">
<p>
過去にcygwinのOCamlパッケージの問題はよくあった(ライブラリは足りないこと; <code>flexdll</code> のありなし)し,
cygwinで配るopamで設定するOCamlを用いてCoqのコンパイルができなかったので,
その２つの方法を使っていません. 代わりに, opamのcustomな設定を用いて, MathCompの設定ができます.
</p>
</div>
<ol class="org-ol">
<li><a id="orgf80091f"></a>opamによるOCaml等の設定<br />
<div class="outline-text-5" id="text-2-2-4-1">
<p>
<a href="https://fdopen.github.io/opam-repository-mingw/installation/">このページ</a>の手動の手順をまとめます:
</p>
<ul class="org-ul">
<li>cygwinで次のパケージを設定します:
<ul class="org-ul">
<li><code>rsync</code>, <code>curl</code>, <code>m4</code>, <code>perl</code>, <code>mingw64-x86_64-gcc-core</code> (or
mingw64-i686-gcc-core)</li>
</ul></li>
<li>opamを<a href="https://github.com/fdopen/opam-repository-mingw/releases/download/0.0.0.2/opam64.tar.xz">ダウンロード</a>します.</li>
<li>shellで次のコマンドを実行します:
<ul class="org-ul">
<li><code>tar -xf opam64.tar.xz</code></li>
<li><code>bash opam64/install.sh</code></li>
<li><code>opam init default "https://github.com/fdopen/opam-repository-mingw.git#opam2" -c "ocaml-variants.4.07.1+mingw64c" --disable-sandboxing</code>
<ul class="org-ul">
<li><code>.bash_profile</code> を変更していい</li>
</ul></li>
</ul></li>
<li><code>eval $(opam config env)</code></li>
<li><code>opam switch create 4.07.1+mingw64c</code>
<ul class="org-ul">
<li>そのコンパイラーはまだ設定されていないなら</li>
</ul></li>
<li><code>opam install camlp5</code> (<span class="timestamp-wrapper"><span class="timestamp">[2019-07-12 Fri]</span></span>'s version: 7.06)</li>
<li><code>opam install ocamlfind</code> (<span class="timestamp-wrapper"><span class="timestamp">[2019-07-12 Fri]</span></span>'s version: 1.8.0)</li>
<li><code>conf-m4</code> も設定されます</li>
<li><code>opam install depext</code></li>
<li><code>opam install depext-cygwinports</code> (<span class="timestamp-wrapper"><span class="timestamp">[2019-07-12 Fri]</span></span>'s version: 0.0.7)
<ul class="org-ul">
<li>その後, <code>/usr/x86_64-w64-mingw32/sys-root/mingw/bin</code> をパスに加える.</li>
</ul></li>
<li><code>opam install pcre</code>
<ul class="org-ul">
<li>成功することがあります；依存するライブラリの一分だけ成功しても大丈夫</li>
</ul></li>
<li><code>opam install lablgtk</code>
<ul class="org-ul">
<li>成功したことはない</li>
<li>基本的なエラー:
<code>This package requires gtk+ 2.0 development packages installed on your system</code></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="orgfa491aa"></a>opamによるCoqやMathCompの設定<br />
<div class="outline-text-5" id="text-2-2-4-2">
<ul class="org-ul">
<li><code>opam repo add coq-released https://coq.inria.fr/opam/released</code></li>
<li><code>opam install coq.8.9.1</code></li>
<li><code>export CAML=/home/username/.opam/4.07.1+mingw64c/bin/</code></li>
<li><code>export COQBIN=/home/username/.opam/4.07.1+mingw64c/bin/</code></li>
<li><code>opam install coq-mathcomp-ssreflect</code></li>
<li><code>opam install coq-mathcomp-fingroup</code></li>
<li><code>opam install coq-mathcomp-algebra</code></li>
<li><code>opam install coq-mathcomp-field</code></li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orgf2c81cc" class="outline-3">
<h3 id="orgf2c81cc"><span class="section-number-3">2.3</span> MacOSの場合</h3>
<div class="outline-text-3" id="text-2-3">
<p>
<a href="https://github.com/coq/platform">Coq platform</a> または <code>Homebrew</code> を使えます: <a href="https://github.com/coq/coq/wiki/Installation-of-Coq-on-Mac">https://github.com/coq/coq/wiki/Installation-of-Coq-on-Mac</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orge27e91f" class="outline-2">
<h2 id="orge27e91f"><span class="section-number-2">3</span> IDEの設定</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org74b1e27" class="outline-3">
<h3 id="org74b1e27"><span class="section-number-3">3.1</span> IDEの基本的な使い方</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>ショートカット:</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Proof General</th>
<th scope="col" class="org-left">CoqIDE</th>
<th scope="col" class="org-left">VSCoq</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>１つタクティックの実行</b></td>
<td class="org-left">CTRL-C CTRL-N</td>
<td class="org-left">CTRL ALT &darr;</td>
<td class="org-left">ALT &darr;</td>
</tr>

<tr>
<td class="org-left"><b>１つタクティックのUndo</b></td>
<td class="org-left">CTRL-C CTRL-U</td>
<td class="org-left">CTRL ALT &uarr;</td>
<td class="org-left">ALT &uarr;</td>
</tr>

<tr>
<td class="org-left"><b>カーソルまでのタクティックの実行</b></td>
<td class="org-left">CTRL-C CTRL-ENTER</td>
<td class="org-left">CTRL ALT &rarr;</td>
<td class="org-left">ALT &rarr;</td>
</tr>

<tr>
<td class="org-left"><b>Check</b></td>
<td class="org-left">CTRL-C CTRL-A CTRL-C</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Print</b></td>
<td class="org-left">CTRL-C CTRL-A CTRL-P</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>About</b></td>
<td class="org-left">CTRL-C CTRL-A CTRL-B</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Locate</b></td>
<td class="org-left">CTRL-C CTRL-A CTRL-L</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Coqをinterrupt</b></td>
<td class="org-left">CTRL-C CTRL-C</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Coqをkill</b></td>
<td class="org-left">CTRL-C CTRL-X</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org399a7f9" class="outline-3">
<h3 id="org399a7f9"><span class="section-number-3">3.2</span> Proof Generalの設定</h3>
<div class="outline-text-3" id="text-3-2">
<p>
インターフェースとして, emacsに慣れているのでしたら, <a href="https://proofgeneral.github.io/">Proof General</a>という<a href="https://www.gnu.org/software/emacs/">emacs</a>エディターモードをお勧めします.
</p>
<ul class="org-ul">
<li>Unix(WindowsのWSL 2を含む)なら, emacsは必ず入っています.</li>
<li>Windowsなら, <a href="https://www.cygwin.com/">cygwin</a>で取得できます.  Coqを設定すると, CoqIDEという専用インターフェースも設定されます.</li>
</ul>

<p>
Proof Generalの設定に, <a href="https://melpa.org/">MELPA</a>とパッケージシステムは進められます:
</p>
<ul class="org-ul">
<li><code>.emacs</code> に次のコードを加えます：</li>
</ul>
<pre class="example">
(require 'package)
;; (setq gnutls-algorithm-priority "NORMAL:-VERS-TLS1.3") ; see remark below
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(package-initialize)
</pre>
<ul class="org-ul">
<li><code>emacs</code> にて:
<ul class="org-ul">
<li><code>M-x package-refresh-contents RET</code></li>
<li>install Proof General
<ul class="org-ul">
<li><code>M-x package-install RET proof-general RET</code></li>
<li>あるいは, <code>M-x package-list RET</code>, <code>proof-general</code> の行で <code>i</code> を押して, <code>x</code> を押すと, 設定されます.</li>
</ul></li>
</ul></li>
<li>ちゃんと <code>coqtop</code> が見えるターミナルから, <code>emacs tt.v</code> を実行して,
<code>From mathcomp Require Import eqtype</code> を書いて, <code>C-c C-n</code> で実行できるかどうか設定の確認できます.</li>
</ul>

<p>
Proof Generalの一番快適な表示はhybridと言い, 次のように設定します:
</p>
<ul class="org-ul">
<li>Proof Generalのメニューから, Coq &rarr; 3 Windows mode layout &rarr; hybrid</li>
</ul>

<p>
Proof Generalを設定したように, <a href="https://github.com/cpitclaudel/company-coq">company-coq</a> を追加で設定すると, 数学的な記号はきれいに表示されますので, おすすめです。
</p>
</div>
<div id="outline-container-orgd2aa86d" class="outline-4">
<h4 id="orgd2aa86d"><span class="section-number-4">3.2.1</span> 特別な設定の読み込み</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
SSReflectとMathCompのバイナリは <code>PATH</code> にない場合, デフォルトな場所で置いていない場合, Coqに教える必要がありますので,
例えば, <code>.emacs</code> に次の変数を設定できます:
</p>
<pre class="example">
(setq coq-prog-name "COQINSTALLDIRECTORY/coq-8.7.0/bin/coqtop")
(setq coq-prog-args
  (cons "-R" (cons "COQINSTALLDIRECTORY/coq-8.7.0/user-contrib/mathcomp" (cons "mathcomp" (cons "-emacs" nil)))))
</pre>

<p>
一方, <code>coq-prog-args</code> は <code>_CoqProject</code> ファイルから読み取ることもできます. 
実際に, <code>coq_makefile</code> も <code>_CoqProject</code> ファイルを使いますので, その方法のほうが便利です.
(<code>_CoqProject</code> の代わりに, 別ファイル名にする場合, emacsで <code>coq-project-filename</code> を設定できます.)
</p>
</div>
</div>
</div>

<div id="outline-container-org2caa3b4" class="outline-3">
<h3 id="org2caa3b4"><span class="section-number-3">3.3</span> CoqIDEの設定</h3>
<div class="outline-text-3" id="text-3-3">
<p>
伝統的なIDEです. <code>opam</code> を用いて, 設定できます:
</p>
<ul class="org-ul">
<li><code>coq</code> を設定してから, <code>opam install coqide</code> (10つ以上の依存するライブラリも設定されます)
<ul class="org-ul">
<li>Debian/Ubuntuで 新しいライブラリの設定が要るかもしれません: <code>pkg-config</code>,
<code>libcairo2-dev</code>, <code>libexpat1-dev</code>, <code>libgtk-3-dev</code>, <code>libgtksourceview-3.0-dev</code></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org070d084" class="outline-3">
<h3 id="org070d084"><span class="section-number-3">3.4</span> vscodeの設定</h3>
<div class="outline-text-3" id="text-3-4">
<p>
<a href="https://code.visualstudio.com/">Visual Studio Code</a> から <code>.deb</code> や <code>.rpm</code> をダウンロードし,
<code>sudo dpkg -i code_1.55.2-1618307277_amd64.deb</code> (<span class="timestamp-wrapper"><span class="timestamp">[2021-04-21 Wed]</span></span>の時点) 設定します.
すると, <code>code</code> というエディターを使えます.
</p>

<p>
<code>Extensions</code> アイコン(あるいはCTRL-SHIFT-X)から,
<code>Marketplace</code> から <code>VSCoq</code> (<span class="timestamp-wrapper"><span class="timestamp">[2021-04-21 Wed]</span></span>時点: バーション0.3.4) を設定します.
</p>
</div>
</div>
</div>
<div id="outline-container-org05fd937" class="outline-2">
<h2 id="org05fd937"><span class="section-number-2">4</span> 追加情報</h2>
<div class="outline-text-2" id="text-4">
<p>
ソースコードやバイナリのダウンロードのまとめ：
</p>
<ul class="org-ul">
<li><a href="http://coq.inria.fr/download">Coq</a> (<a href="https://github.com/coq/coq">github</a>, <a href="https://github.com/coq/coq/releases/">beta版など</a>)</li>
<li><a href="http://math-comp.github.io/">Mathematical Components</a> (<a href="https://github.com/math-comp/math-comp">github</a>)</li>
<li><a href="https://proofgeneral.github.io/">Proof General</a></li>
</ul>

<p>
設定に関する追加情報：
</p>
<ul class="org-ul">
<li><a href="https://coq.inria.fr/opam/www/using.html">Coqのサイトによるopamの設定方法</a></li>
<li><a href="https://github.com/math-comp/math-comp/blob/master/INSTALL.md">MathCompによる設定の説明</a></li>
<li><a href="http://www.mathlibre.org/index-ja.html">MathLibre</a>のDVDにCoqとSSReflectとMathCompが入っています.</li>
<li><a href="https://github.com/coq/coq/wiki/Installation%20of%20Coq%20on%20Windows">Coqのwiki</a> でWindowsに関して詳細な情報があります.</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Reynald Affeldt</p>
<p class="date">Created: 2022-08-08 Mon 23:36</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
